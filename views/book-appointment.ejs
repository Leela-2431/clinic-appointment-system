<%- include("partials/navbar", { session: session }) %>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Book Appointment</title>
  <link rel="stylesheet" href="/css/styles.css">
  <style>
    /* (your CSS unchanged) */
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #dbeafe, #e0f7fa, #fff9c4);
      background-size: 300% 300%;
      animation: bgMove 15s ease infinite;
      margin: 0;
      padding: 0;
    }
    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .appointment-container {
      max-width: 600px;
      margin: 50px auto;
      padding: 35px;
      background: rgba(255, 255, 255, 0.75);
      border-radius: 20px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
    }
    h2 { text-align: center; color: #0077b6; margin-bottom: 25px; font-size: 28px; }
    label { font-weight: 600; margin-bottom: 6px; display: block; color: #333; }
    select, input[type="date"], input[type="time"], textarea {
      width: 100%; padding: 12px 14px; margin-bottom: 18px; border: 1px solid #ccc;
      border-radius: 12px; font-size: 1rem; background: #f9f9f9;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    select:focus, input:focus, textarea:focus {
      border-color: #0077b6; box-shadow: 0 0 0 3px rgba(0,119,182,0.2); background: #fff; outline: none;
    }
    textarea { resize: vertical; min-height: 90px; }
    .submit-btn {
      width: 100%; padding: 14px; background: linear-gradient(to right,#00c6ff,#0072ff);
      color: white; border: none; border-radius: 12px; font-size: 17px; font-weight: bold;
      cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(0,114,255,0.3); }
    .booking-as { text-align:center; margin-bottom:20px; font-weight:500; color:#555; font-size:16px; }
  </style>
</head>
<body>

  <div class="appointment-container">
    <h2>Book Appointment</h2>

    <% if (session && session.patient) { %>
      <p class="booking-as">Booking as: <strong><%= session.patient.name %></strong></p>
    <% } %>

    <form action="/book-appointment" method="POST">
      <label for="doctor_id">Doctor:</label>
      <select name="doctor_id" id="doctor_id" required>
        <option value="">-- Choose doctor --</option>
        <% if (Array.isArray(doctors)) { doctors.forEach(function(doctor) { %>
          <option value="<%= doctor.id %>"><%= doctor.name %> - <%= doctor.specialization %></option>
        <% }) } %>
      </select>

      <label for="appointment_date">Date:</label>
      <input type="date" name="appointment_date" id="appointment_date" required min="<%= new Date().toISOString().split('T')[0] %>">

      <label for="appointment_time">Time:</label>
      <input type="time" name="appointment_time" id="appointment_time" required step="900">

      <label for="reason">Message:</label>
      <textarea name="reason" id="reason" placeholder="Any notes or symptoms (optional)"></textarea>

      <button type="submit" class="submit-btn">Book Now</button>
    </form>
  </div>

</body>
</html>
